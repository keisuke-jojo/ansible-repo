---

- name: Save config
  hosts: all
  gather_facts: no
  connection: local
  vars:
    bigip_admin_credentials: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30623365393739383266376332636464376533613530313433353431393439306561613764396264
          3863623362306138626562306432313665656633653932380a663464396537353062306563303237
          65626330346634333536373138636361313534313964336134353735653034613534636236383564
          6464613166396332640a306336356364386665343231633866626337343236313234336639323237
          3665

  tasks:
    - name: Save BIGIP config
      bigip_config:
        save: yes
        provider:
          user: admin
          server: "{{ ansible_host }}"
          password: "{{ bigip_admin_credentials }}"
          validate_certs: no
